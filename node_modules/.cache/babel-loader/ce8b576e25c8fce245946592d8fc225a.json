{"ast":null,"code":"var _jsxFileName = \"/home/rebeca/Documentos/Laboratoria/clonados/SAP005-burger-queen/src/Components/Burguer/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport IndeterminateCheckBoxIcon from \"@material-ui/icons/IndeterminateCheckBox\";\nimport AddBoxIcon from \"@material-ui/icons/AddBox\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  button: {\n    margin: theme.spacing(1)\n  }\n}));\n\nfunction MenuLunch() {\n  _s();\n\n  const classes = useStyles();\n  const token = localStorage.getItem(\"token\");\n  const [lunch, setLunch] = useState(\"\");\n  const [produto, setProduto] = useState([]);\n  const [total, setTotal] = useState(0);\n  const nomeCliente = sessionStorage.getItem(\"cliente\");\n  const numeroMesa = sessionStorage.getItem(\"mesa\");\n\n  const handleDeleteItem = indice => {\n    const ItensFiltrados = produto.filter((_, index) => indice != index);\n    setProduto(ItensFiltrados);\n  };\n\n  const handleAdicionaItem = index => {\n    let newArrayProduto = [...produto];\n    newArrayProduto[index].qtd++;\n    newArrayProduto[index].price = newArrayProduto[index].initialPrice * newArrayProduto[index].qtd;\n    setProduto(newArrayProduto);\n  };\n\n  const handleRemoverItem = index => {\n    let newArrayProduto = [...produto];\n    newArrayProduto[index].qtd--;\n    newArrayProduto[index].price = newArrayProduto[index].initialPrice * newArrayProduto[index].qtd;\n    setProduto(newArrayProduto);\n  };\n\n  useEffect(() => {\n    const soma = produto.reduce((valorAnterior, valorAtual) => valorAnterior + valorAtual.price, 0);\n    setTotal(soma);\n  }, [produto]);\n\n  const handleEnviar = () => {\n    setTotal(produto.reduce((prevTotal, total) => prevTotal + total.price, 0));\n    fetch(\"https://lab-api-bq.herokuapp.com/orders\", {\n      method: \"POST\",\n      headers: {\n        \"Access-Control-Allow-Credentials\": true,\n        \"Access-Control-Allow-Methods\": \"GET,OPTIONS,PATCH,DELETE,POST\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Content-Type\": \"application/json\",\n        accept: \"application/json\",\n        Authorization: token\n      },\n      body: JSON.stringify({\n        client: nomeCliente,\n        table: numeroMesa,\n        products: produto.map(item => ({\n          id: Number(item.id),\n          qtd: 1\n        }))\n      })\n    }).then(response => response.json()).then(json => {\n      alert(\"Pedido está sendo preparado!\");\n    });\n    return total;\n  };\n\n  function handleItem(item) {\n    setProduto(prevProduto => [...prevProduto, item]);\n  }\n\n  useEffect(() => {\n    fetch(\"https://lab-api-bq.herokuapp.com/products\", {\n      method: \"GET\",\n      headers: {\n        accept: \"application/json\",\n        Authorization: `${token}`\n      }\n    }).then(response => response.json()).then(json => {\n      const lunch = json.filter(item => item.type === \"all-day\");\n      setLunch(lunch);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"container-allday\",\n    children: [lunch && lunch.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-itens\",\n      onClick: e => {\n        const name = item.name;\n        const price = item.price;\n        const id = item.id;\n        const qtd = 1;\n        const initialPrice = item.price;\n        const complement = item.complement;\n        const flavor = item.flavor;\n        const objeto = {\n          name,\n          price,\n          id,\n          qtd,\n          initialPrice,\n          complement,\n          flavor\n        };\n        handleItem(objeto);\n      },\n      className: \"container-itens\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [item.name, \" \", item.flavor, \" \", item.complement, \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"price\",\n        children: Intl.NumberFormat(\"pt-BR\", {\n          style: \"currency\",\n          currency: \"BRL\"\n        }).format(item.price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-pedidos\",\n      children: [produto.length > 0 && produto.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pedido\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [item.name, \" \", item.flavor, \" \", item.complement]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Qtd: \", item.qtd]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            className: \"btn-adicionar\",\n            type: \"submit\",\n            onClick: () => handleAdicionaItem(index),\n            children: /*#__PURE__*/_jsxDEV(AddBoxIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            className: \"btn-remover\",\n            type: \"submit\",\n            onClick: () => handleRemoverItem(index),\n            children: /*#__PURE__*/_jsxDEV(IndeterminateCheckBoxIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: Intl.NumberFormat(\"pt-BR\", {\n            style: \"currency\",\n            currency: \"BRL\"\n          }).format(item.price)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"delete\",\n          className: \"btn-deletar\",\n          type: \"submit\",\n          onClick: () => handleDeleteItem(index),\n          children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App-valor-total\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Valor Total:\", \" \", Intl.NumberFormat(\"pt-BR\", {\n            style: \"currency\",\n            currency: \"BRL\"\n          }).format(total)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"secundary\",\n      className: classes.button,\n      type: \"submit\",\n      onClick: handleEnviar,\n      children: \"Preparar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MenuLunch, \"ABTWmcbDf5FUvzMMArTlVYjk1uU=\", false, function () {\n  return [useStyles];\n});\n\n_c = MenuLunch;\nexport default MenuLunch;\n\nvar _c;\n\n$RefreshReg$(_c, \"MenuLunch\");","map":{"version":3,"sources":["/home/rebeca/Documentos/Laboratoria/clonados/SAP005-burger-queen/src/Components/Burguer/index.js"],"names":["React","useEffect","useState","DeleteIcon","IconButton","Button","IndeterminateCheckBoxIcon","AddBoxIcon","makeStyles","useStyles","theme","button","margin","spacing","MenuLunch","classes","token","localStorage","getItem","lunch","setLunch","produto","setProduto","total","setTotal","nomeCliente","sessionStorage","numeroMesa","handleDeleteItem","indice","ItensFiltrados","filter","_","index","handleAdicionaItem","newArrayProduto","qtd","price","initialPrice","handleRemoverItem","soma","reduce","valorAnterior","valorAtual","handleEnviar","prevTotal","fetch","method","headers","accept","Authorization","body","JSON","stringify","client","table","products","map","item","id","Number","then","response","json","alert","handleItem","prevProduto","type","e","name","complement","flavor","objeto","Intl","NumberFormat","style","currency","format","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport IndeterminateCheckBoxIcon from \"@material-ui/icons/IndeterminateCheckBox\";\nimport AddBoxIcon from \"@material-ui/icons/AddBox\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n}));\n\nfunction MenuLunch() {\n  const classes = useStyles();\n  const token = localStorage.getItem(\"token\");\n  const [lunch, setLunch] = useState(\"\");\n  const [produto, setProduto] = useState([]);\n  const [total, setTotal] = useState(0);\n  const nomeCliente = sessionStorage.getItem(\"cliente\");\n  const numeroMesa = sessionStorage.getItem(\"mesa\");\n\n  const handleDeleteItem = (indice) => {\n    const ItensFiltrados = produto.filter((_, index) => indice != index);\n    setProduto(ItensFiltrados);\n  };\n\n  const handleAdicionaItem = (index) => {\n    let newArrayProduto = [...produto];\n    newArrayProduto[index].qtd++;\n    newArrayProduto[index].price =\n    newArrayProduto[index].initialPrice * newArrayProduto[index].qtd;\n    setProduto(newArrayProduto);\n  };\n\n  const handleRemoverItem = (index) => {\n    let newArrayProduto = [...produto];\n    newArrayProduto[index].qtd--;\n    newArrayProduto[index].price =\n    newArrayProduto[index].initialPrice * newArrayProduto[index].qtd;\n    setProduto(newArrayProduto);\n  };\n\n  useEffect(() => {\n    const soma = produto.reduce(\n      (valorAnterior, valorAtual) => valorAnterior + valorAtual.price,\n      0\n    );\n    setTotal(soma);\n  }, [produto]);\n\n  const handleEnviar = () => {\n    setTotal(produto.reduce((prevTotal, total) => prevTotal + total.price, 0));\n    fetch(\"https://lab-api-bq.herokuapp.com/orders\", {\n      method: \"POST\",\n      headers: {\n        \"Access-Control-Allow-Credentials\": true,\n        \"Access-Control-Allow-Methods\": \"GET,OPTIONS,PATCH,DELETE,POST\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Content-Type\": \"application/json\",\n        accept: \"application/json\",\n        Authorization: token,\n      },\n      body: JSON.stringify({\n        client: nomeCliente,\n        table: numeroMesa,\n        products: produto.map((item) => ({\n          id: Number(item.id),\n          qtd: 1,\n        })),\n      }),\n    })\n      .then((response) => response.json())\n      .then((json) => {\n        alert(\"Pedido está sendo preparado!\"); \n      });\n    return total;\n  };\n\n  function handleItem(item) {\n    setProduto((prevProduto) => [...prevProduto, item]);\n  }\n\n  useEffect(() => {\n    fetch(\"https://lab-api-bq.herokuapp.com/products\", {\n      method: \"GET\",\n      headers: {\n        accept: \"application/json\",\n        Authorization: `${token}`,\n      },\n    })\n      .then((response) => response.json())\n      .then((json) => {\n        const lunch = json.filter((item) => item.type === \"all-day\");\n        setLunch(lunch);\n      });\n  }, []);\n\n  return (\n    <section className=\"container-allday\">\n      {lunch &&\n        lunch.map((item, index) => (\n          <div\n            className=\"container-itens\"\n            key={index}\n            onClick={(e) => {\n              const name = item.name;\n              const price = item.price;\n              const id = item.id;\n              const qtd = 1;\n              const initialPrice = item.price;\n              const complement = item.complement;\n              const flavor = item.flavor;\n              const objeto = {\n                name,\n                price,\n                id,\n                qtd,\n                initialPrice,\n                complement,\n                flavor,\n              };\n              handleItem(objeto);\n            }}\n            className=\"container-itens\"\n          >\n            <p>\n              {item.name} {item.flavor} {item.complement}\n              {\"\"}\n            </p>\n\n            <p className=\"price\">\n              {Intl.NumberFormat(\"pt-BR\", {\n                style: \"currency\",\n                currency: \"BRL\",\n              }).format(item.price)}\n            </p>\n          </div>\n        ))}\n      <div className=\"container-pedidos\">\n        {produto.length > 0 &&\n          produto.map((item, index) => (\n            <div className=\"pedido\" key={index}>\n              <p>\n                {item.name} {item.flavor} {item.complement}\n              </p>\n              <div>\n                <p>Qtd: {item.qtd}</p>\n                <IconButton\n                  className=\"btn-adicionar\"\n                  type=\"submit\"\n                  onClick={() => handleAdicionaItem(index)}\n                >\n                  <AddBoxIcon />\n                </IconButton>\n                <IconButton\n                  className=\"btn-remover\"\n                  type=\"submit\"\n                  onClick={() => handleRemoverItem(index)}\n                >\n                  <IndeterminateCheckBoxIcon />\n                </IconButton>\n              </div>\n              <p>\n                {Intl.NumberFormat(\"pt-BR\", {\n                  style: \"currency\",\n                  currency: \"BRL\",\n                }).format(item.price)}\n              </p>\n\n              <IconButton\n                aria-label=\"delete\"\n                className=\"btn-deletar\"\n                type=\"submit\"\n                onClick={() => handleDeleteItem(index)}\n              >\n                {<DeleteIcon />}\n              </IconButton>\n            </div>\n          ))}\n        <div className=\"App-valor-total\">\n          <p>\n            Valor Total:{\" \"}\n            {Intl.NumberFormat(\"pt-BR\", {\n              style: \"currency\",\n              currency: \"BRL\",\n            }).format(total)}\n          </p>\n        </div>\n      </div>\n      <Button\n        variant=\"contained\"\n        color=\"secundary\"\n        className={classes.button}\n        type=\"submit\"\n        onClick={handleEnviar}\n      >\n        Preparar\n      </Button>\n    </section>\n  );\n}\nexport default MenuLunch;\n"]},"metadata":{},"sourceType":"module"}